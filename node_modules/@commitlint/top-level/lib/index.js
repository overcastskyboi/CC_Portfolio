<<<<<<< HEAD
<<<<<<< HEAD
import process from "node:process";
import escalade from "escalade";
=======
import path from "node:path";
import { findUp } from "find-up";
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
import path from "node:path";
import { findUp } from "find-up";
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
export default toplevel;
/**
 * Find the next git root
 */
<<<<<<< HEAD
<<<<<<< HEAD
function toplevel(cwd = process.cwd()) {
    return escalade(cwd, (directory, files) => {
        if (files.includes(".git")) {
            return directory;
        }
    });
=======
=======
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
async function toplevel(cwd) {
    const found = await searchDotGit(cwd);
    if (typeof found !== "string") {
        return found;
    }
    return path.join(found, "..");
}
/**
 * Search .git, the '.git' can be a file(submodule), also can be a directory(normal)
 */
async function searchDotGit(cwd) {
    const foundFile = await findUp(".git", { cwd, type: "file" });
    const foundDir = await findUp(".git", { cwd, type: "directory" });
    return foundFile || foundDir;
<<<<<<< HEAD
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
}
//# sourceMappingURL=index.js.map