/**
 * @fileoverview Utility functions for propWrapperFunctions setting
 */

'use strict';

<<<<<<< HEAD
<<<<<<< HEAD
=======
const iterFrom = require('es-iterator-helpers/Iterator.from');
const map = require('es-iterator-helpers/Iterator.prototype.map');

>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
const iterFrom = require('es-iterator-helpers/Iterator.from');
const map = require('es-iterator-helpers/Iterator.prototype.map');

>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
/** TODO: type {(string | { name: string, linkAttribute: string })[]} */
/** @type {any} */
const DEFAULT_LINK_COMPONENTS = ['a'];
const DEFAULT_LINK_ATTRIBUTE = 'href';

<<<<<<< HEAD
<<<<<<< HEAD
=======
=======
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
/** TODO: type {(string | { name: string, formAttribute: string })[]} */
/** @type {any} */
const DEFAULT_FORM_COMPONENTS = ['form'];
const DEFAULT_FORM_ATTRIBUTE = 'action';

function getFormComponents(context) {
  const settings = context.settings || {};
  const formComponents = /** @type {typeof DEFAULT_FORM_COMPONENTS} */ (
    DEFAULT_FORM_COMPONENTS.concat(settings.formComponents || [])
  );
  return new Map(map(iterFrom(formComponents), (value) => {
    if (typeof value === 'string') {
      return [value, [DEFAULT_FORM_ATTRIBUTE]];
    }
    return [value.name, [].concat(value.formAttribute)];
  }));
}

<<<<<<< HEAD
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
function getLinkComponents(context) {
  const settings = context.settings || {};
  const linkComponents = /** @type {typeof DEFAULT_LINK_COMPONENTS} */ (
    DEFAULT_LINK_COMPONENTS.concat(settings.linkComponents || [])
  );
<<<<<<< HEAD
<<<<<<< HEAD
  return new Map(linkComponents.map((value) => {
    if (typeof value === 'string') {
      return [value, DEFAULT_LINK_ATTRIBUTE];
    }
    return [value.name, value.linkAttribute];
=======
=======
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
  return new Map(map(iterFrom(linkComponents), (value) => {
    if (typeof value === 'string') {
      return [value, [DEFAULT_LINK_ATTRIBUTE]];
    }
    return [value.name, [].concat(value.linkAttribute)];
<<<<<<< HEAD
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
  }));
}

module.exports = {
<<<<<<< HEAD
<<<<<<< HEAD
  getLinkComponents
=======
  getFormComponents,
  getLinkComponents,
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
  getFormComponents,
  getLinkComponents,
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
};
