/**
 * @fileoverview Utility functions for type annotation detection.
 * @author Yannick Croissant
 * @author Vitor Balocco
 */

'use strict';

<<<<<<< HEAD
<<<<<<< HEAD
=======
const getFirstTokens = require('./eslint').getFirstTokens;

>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
const getFirstTokens = require('./eslint').getFirstTokens;

>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
/**
 * Checks if we are declaring a `props` argument with a flow type annotation.
 * @param {ASTNode} node The AST node being checked.
 * @param {Object} context
<<<<<<< HEAD
<<<<<<< HEAD
 * @returns {Boolean} True if the node is a type annotated props declaration, false if not.
=======
 * @returns {boolean} True if the node is a type annotated props declaration, false if not.
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
 * @returns {boolean} True if the node is a type annotated props declaration, false if not.
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
 */
function isAnnotatedFunctionPropsDeclaration(node, context) {
  if (!node || !node.params || !node.params.length) {
    return false;
  }

  const typeNode = node.params[0].type === 'AssignmentPattern' ? node.params[0].left : node.params[0];

<<<<<<< HEAD
<<<<<<< HEAD
  const tokens = context.getFirstTokens(typeNode, 2);
=======
  const tokens = getFirstTokens(context, typeNode, 2);
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
  const tokens = getFirstTokens(context, typeNode, 2);
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
  const isAnnotated = typeNode.typeAnnotation;
  const isDestructuredProps = typeNode.type === 'ObjectPattern';
  const isProps = tokens[0].value === 'props' || (tokens[1] && tokens[1].value === 'props');

  return (isAnnotated && (isDestructuredProps || isProps));
}

module.exports = {
<<<<<<< HEAD
<<<<<<< HEAD
  isAnnotatedFunctionPropsDeclaration
=======
  isAnnotatedFunctionPropsDeclaration,
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
=======
  isAnnotatedFunctionPropsDeclaration,
>>>>>>> 100f0e1 (feat: implement routing, watchlist overhaul, and decommission console)
};
